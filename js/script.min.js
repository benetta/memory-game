"use strict";var deck=["D2","D3","D4","D5","D6","D7","D8","D9","D0","DJ","DQ","DK","DA","H2","H3","H4","H5","H6","H7","H8","H9","H0","HJ","HQ","HK","HA","C2","C3","C4","C5","C6","C7","C8","C9","C0","CJ","CQ","CK","CA","S2","S3","S4","S5","S6","S7","S8","S9","S0","SJ","SQ","SK","SA"],cards=document.querySelectorAll(".card"),newGame=document.querySelector("#newGame"),menuNewGame=document.querySelector("#menu-newGame"),endGameRetryGame=document.querySelector("#endGame-retryGame"),score=document.querySelector("#setScore"),endGameScore=document.querySelector("#endGameScore"),myScore=0,newDeck=[],twoCards=[],ticks=0;function CreateCard(e,t){this.num=e,this.src=t}var shuffle=function(e){for(var t=e.length-1;0<t;t--){var n=Math.floor(Math.random()*(t+1)),r=[e[n],e[t]];e[t]=r[0],e[n]=r[1]}},setDeck=function(){shuffle(deck),newDeck=(newDeck=deck.slice(0,9)).concat(newDeck),shuffle(newDeck),cards.forEach(function(e,t){e.classList.add(newDeck[t])});var e=setInterval(function(){++ticks<5?document.querySelector("body").style.pointerEvents="none":(document.querySelector("body").style="none",ticks=0,setBacks())},1e3);setTimeout(function(){clearInterval(e)},5e3)},setBacks=function(){cards.forEach(function(e,t){e.classList.remove(newDeck[t]),e.setAttribute("data-tid","Card"),e.style="none"})};cards.forEach(function(n,r){n.addEventListener("click",function(e){e.preventDefault(),n.classList.add(newDeck[r]),n.setAttribute("data-tid","Card-flipped");var t=new CreateCard(r,newDeck[r]);compareCards(t)})});var compareCards=function(e){if(twoCards.push(e),2===twoCards.length){var t=twoCards[0].src===twoCards[1].src,n=twoCards[0].num!==twoCards[1].num,r=[cards[twoCards[0].num],cards[twoCards[1].num]];if(twoCards[0]=r[0],twoCards[1]=r[1],n&&t){var c=!0,a=!1,o=void 0;try{for(var s,d=twoCards[Symbol.iterator]();!(c=(s=d.next()).done);c=!0){var i=s.value;i.classList.add("animated","fadeOut"),i.style.pointerEvents="none"}}catch(e){a=!0,o=e}finally{try{!c&&d.return&&d.return()}finally{if(a)throw o}}setScore(!0),twoCards=[]}else if(n&&!t){var u=!0,l=!1,m=void 0;try{for(var f,y=twoCards[Symbol.iterator]();!(u=(f=y.next()).done);u=!0){f.value.classList.add("animated","shake")}}catch(e){l=!0,m=e}finally{try{!u&&y.return&&y.return()}finally{if(l)throw m}}document.querySelector("body").style.pointerEvents="none",new Promise(function(e,t){setTimeout(function(){twoCards.forEach(function(e){e.className="card",e.setAttribute("data-tid","Card")}),e()},1e3)}).then(function(){twoCards=[],document.querySelector("body").style="none"}),setScore(!1)}else!n&&t&&twoCards.pop()}},setScore=function(e){var n=0,r=0;cards.forEach(function(e,t){e.classList.contains("fadeOut")?n++:e.classList.contains("fadeOut")||r++}),e?myScore+=r/2*42:e||(myScore-=n/2*42),score.textContent=myScore,endGame(n)},endGame=function(e){18===e&&(document.querySelector(".end").classList.remove("hidden"),document.querySelector(".end").classList.add("animated","fadeIn"),document.querySelector(".container").classList.add("hidden"),endGameScore.textContent=myScore)};menuNewGame.addEventListener("click",function(e){e.preventDefault(),myScore=0,score.textContent="0",cards.forEach(function(e){e.className="card"}),setDeck()}),newGame.addEventListener("click",function(e){e.preventDefault(),document.querySelector(".start").classList.add("hidden"),document.querySelector(".container").classList.remove("hidden"),setDeck()}),endGameRetryGame.addEventListener("click",function(e){e.preventDefault(),document.querySelector(".end").classList.add("hidden"),document.querySelector(".end").classList.remove("animated","fadeIn"),document.querySelector(".container").classList.remove("hidden"),myScore=0,score.textContent="0",cards.forEach(function(e){e.className="card",e.style="none"}),setDeck()});